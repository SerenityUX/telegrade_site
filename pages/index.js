import Head from "next/head";
import Image from "next/image";
import { Inter } from "@next/font/google";
import styles from "@/styles/Home.module.css";
import { useState } from "react";

const inter = Inter({ subsets: ["latin"] });
export default function Home() {
  function scrapeAccount() {
    var myHeaders = new Headers();
    myHeaders.append("X-API-KEY", "DemoAPIKeyTokenSeHYGXDfd4SFD320Sc39Asd0Sc39Asd4s");
    
    var requestOptions = {
      method: 'GET',
      headers: myHeaders,
      redirect: 'follow'
    };
    
    fetch("https://sandbox.tikapi.io/public/check?username=minimaru.store", requestOptions)
      .then(response => response.text())
      .then(result => console.log(result))
      .catch(error => console.log('error', error));
  }
  const [handle, setHandle] = useState("");
  const [password, setPassword] = useState("");

	const onSubmit = async () => {
		const user = await fetch("http://localhost:3000/api/tiktok/user/minimaru.store")
			.then((res) => {
				return res.json()
			})

		console.log(user)
	}

	return (
		<>
			<Head>
				<title>Telegrade</title>
				<meta
					name="description"
					content="Generated by create next app"
				/>
				<meta
					name="viewport"
					content="width=device-width, initial-scale=1"
				/>
				<link rel="icon" href="/favicon.ico" />
			</Head>
			<main className={styles.main}>
				<div>
					<p>Telegrade</p>
					<div>
						<p>TikTok Handle</p>
						<input
							value={handle}
							onChange={(event) => {
								if (event.target.value.charAt(0) == "@") {
									setHandle(
										event.target.value
											.toLowerCase()
											.replace(/\s/g, "")
									);
								} else {
									setHandle(
										"@" +
											event.target.value
												.toLowerCase()
												.replace(/\s/g, "")
									);
								}
							}}
						/>
					</div>
					<div>
						<p>Email Address</p>
						<input />
					</div>
				</div>
				<button onClick={onSubmit}>Submit</button>
			</main>
		</>
	);
}
